<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .hide-warning{
            display: none;
        }
        .warning{
            color: red;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <form>

        <div class="inputs">
            <label for="username">Username</label><br>
            <input type="text" id="username" name="username" required><br>
            <label for="email">Email Address</label><br>
            <input type="email" id="email" name="email" required><br>
            <label for="password">Password</label><br>
            <input type="password" id="password" name="password" onkeyup="
            handleOnKeyUp('password', event);
            " required><br>
            <label for="repassword">Re-enter Password</label><br>
            <input type="password" id="repassword" name="repassword" onkeyup="
            handleOnKeyUp('repassword', event);
            " required><br>
        </div>

        <p class="warning hide-warning" id="exist">Password and repassword do not match!</p>


        <button type="submit" class="submit">Sign Up</button>
        
    </form>
    <script>
		let password = "";
		let repassword = "";
		

    function handleOnKeyUp(input, event) {
        const idcheck = document.querySelector('#exists');
        console.log(idcheck);
        const currentKeys = document.querySelector(`#${input}`);
        const button = document.querySelector('.submit');
        let currentKeysUp = '';
        currentKeysUp = currentKeysUp ? currentKeysUp + currentKeys : currentKeys;
		if (input === "repassword") { repassword = currentKeysUp.value } else { password = currentKeysUp.value }

		if (repassword.length == 0) { console.log("waiting"); button.disabled = true; } else {
			if (password === repassword) {
                console.log(password);
                console.log(repassword);
				console.log("yes");
                button.disabled = false;
                warningToggle(true);
			} else {
				console.log("no");
				// Optionally, you can alert the user or show a message
				console.log("Passwords do not match!");
                button.disabled = true;
                warningToggle(false);
			}
		}
                    
    }

    function warningToggle(status) {
        const warning = document.querySelector('.warning');
        if(status){
            if(!warning.classList.contains('hide-warning')){
                warning.classList.add('hide-warning');
            }
        } else {
            if(warning.classList.contains('hide-warning')){
                warning.classList.remove('hide-warning');
            }
        }
    }

		</script>
</body>
</html>